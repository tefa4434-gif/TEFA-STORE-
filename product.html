<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>TEFA STORE - Ø§Ù„Ù…Ù†ØªØ¬</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap"
    rel="stylesheet"
  />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Cairo", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: #f5f5f7;
      color: #111827;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    .page {
      max-width: 720px;
      margin: 0 auto;
      min-height: 100vh;
      background: #fff;
      display: flex;
      flex-direction: column;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
      position: sticky;
      top: 0;
      z-index: 20;
      background: #ffffffcc;
      backdrop-filter: blur(8px);
    }

    .brand {
      font-weight: 800;
      letter-spacing: 0.08em;
      font-size: 18px;
    }

    .cart-icon {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #fff;
    }

    .cart-icon svg {
      width: 18px;
      height: 18px;
    }

    .cart-badge {
      position: absolute;
      top: -6px;
      left: -6px;
      min-width: 18px;
      height: 18px;
      padding: 0 4px;
      border-radius: 999px;
      background: #ef4444;
      color: #fff;
      font-size: 10px;
      font-weight: 700;
      display: none;
      align-items: center;
      justify-content: center;
    }

    main {
      padding: 12px 16px 80px;
      flex: 1;
    }

    .product-image-wrapper {
      border-radius: 18px;
      overflow: hidden;
      background: #f3f4f6;
      margin-bottom: 16px;
    }

    .product-image-wrapper img {
      width: 100%;
      display: block;
    }

    .product-title {
      font-size: 22px;
      font-weight: 800;
      margin-bottom: 4px;
    }

    .price-row {
      display: flex;
      align-items: baseline;
      gap: 12px;
      margin-bottom: 8px;
    }

    .price-current {
      font-size: 22px;
      font-weight: 800;
      color: #16a34a;
    }

    .price-old {
      font-size: 16px;
      color: #9ca3af;
      text-decoration: line-through;
    }

    .product-desc {
      font-size: 14px;
      color: #4b5563;
      line-height: 1.8;
      margin-bottom: 16px;
    }

    .section-title {
      font-size: 14px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .color-row {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 16px;
    }

    .color-dot {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      border: 2px solid transparent;
      outline: none;
      cursor: pointer;
      position: relative;
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease;
    }

    .color-dot::after {
      content: "";
      position: absolute;
      inset: 6px;
      border-radius: inherit;
      background: var(--color);
    }

    .color-dot.selected {
      border-color: #111827;
      box-shadow: 0 0 0 3px #11182710;
      transform: translateY(-1px);
    }

    .qty-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 20px;
    }

    .qty-controls {
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      overflow: hidden;
    }

    .qty-btn {
      width: 40px;
      height: 40px;
      border: none;
      background: #f9fafb;
      font-size: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .qty-value {
      width: 40px;
      text-align: center;
      font-weight: 700;
    }

    .sticky-footer {
      position: fixed;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 720px;
      padding: 12px 16px 16px;
      background: linear-gradient(to top, #ffffff, #ffffffee, #ffffff00);
      z-index: 30;
    }

    .btn-primary {
      width: 100%;
      border-radius: 999px;
      padding: 14px 18px;
      border: none;
      background: #111827;
      color: #fff;
      font-size: 16px;
      font-weight: 800;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      cursor: pointer;
    }

    .btn-primary svg {
      width: 18px;
      height: 18px;
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 96px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      min-width: 260px;
      max-width: 90%;
      background: #111827;
      color: #fff;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 10px 25px #00000030;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease, transform 0.2s ease;
      z-index: 40;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .toast-color-dot {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      border: 2px solid #ffffffaa;
    }

    @media (min-width: 640px) {
      main {
        padding-inline: 24px;
      }
      .sticky-footer {
        padding-inline: 24px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <a href="index.html" aria-label="Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©">
        â†
      </a>
      <div class="brand">TEFA STORE</div>
      <a href="cart.html" class="cart-icon" aria-label="Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª">
        <span id="cart-count" class="cart-badge">0</span>
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M6 6h15l-1.5 8h-13L4 3H2" stroke="#111827" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="10" cy="19" r="1" fill="#111827"/>
          <circle cx="17" cy="19" r="1" fill="#111827"/>
        </svg>
      </a>
    </header>

    <main>
      <div class="product-image-wrapper">
        <img id="product-image" src="rozalin-main.jpg" alt="Ø§Ù„Ù…Ù†ØªØ¬" />
      </div>

      <h1 id="product-title" class="product-title">Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ† 3 Ù‚Ø·Ø¹</h1>

      <div class="price-row">
        <div id="product-price" class="price-current">749 Ø¬</div>
        <div id="product-old-price" class="price-old">949 Ø¬</div>
      </div>

      <p id="product-desc" class="product-desc">
        Ø®Ø§Ù…Ø© Ø±ÙˆØ²Ø§Ù„ÙŠÙ† Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù…Ù† 60 Ù„Ø­Ø¯ 95 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§. Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ 3 Ù‚Ø·Ø¹ Ø¬Ø§Ù‡Ø²ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù„Ø¨Ø³.
      </p>

      <div style="margin-bottom: 12px;">
        <div class="section-title">Ø§Ø®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙˆÙ†</div>
        <div id="color-row" class="color-row"></div>
      </div>

      <div class="qty-row">
        <div class="section-title">Ø§Ù„ÙƒÙ…ÙŠØ©</div>
        <div class="qty-controls">
          <button type="button" class="qty-btn" id="qty-minus">âˆ’</button>
          <div id="qty-value" class="qty-value">1</div>
          <button type="button" class="qty-btn" id="qty-plus">+</button>
        </div>
      </div>
    </main>

    <div class="sticky-footer">
      <button id="add-to-cart" class="btn-primary">
        <svg viewBox="0 0 24 24" fill="none">
          <path d="M6 6h15l-1.5 8h-13L4 3H2" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="10" cy="19" r="1" fill="#fff"/>
          <circle cx="17" cy="19" r="1" fill="#fff"/>
        </svg>
        <span>Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</span>
      </button>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite">
      <div id="toast-color" class="toast-color-dot"></div>
      <div id="toast-text">ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©</div>
    </div>
  </div>

  <script>
    // ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª =====
    const PRODUCTS = {
      rozalin: {
        id: "rozalin",
        name: "Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ† 3 Ù‚Ø·Ø¹",
        price: 749,
        oldPrice: 949,
        desc: "Ø®Ø§Ù…Ø© Ø±ÙˆØ²Ø§Ù„ÙŠÙ† Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù…Ù† 60 Ù„Ø­Ø¯ 95 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§. Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ 3 Ù‚Ø·Ø¹ Ø¬Ø§Ù‡Ø²ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ù„Ø¨Ø³.",
        mainImage: "rozalin-main.jpg",
        colors: [
          { id: "simon", label: "Ø³ÙŠÙ…ÙˆÙ†", hex: "#f9a8a8", image: "rozalin-simon.jpg" },
          { id: "mov",   label: "Ù…ÙˆÙ",   hex: "#a855f7", image: "rozalin-mov.jpg" },
          { id: "kafeh", label: "ÙƒØ§ÙÙŠÙ‡", hex: "#b9936c", image: "rozalin-kafeh.jpg" },
          { id: "beige", label: "Ø¨ÙŠØ¬",   hex: "#f3e9dd", image: "rozalin-beige.jpg" },
          { id: "zyti",  label: "Ø²ÙŠØªÙŠ",  hex: "#4b7f52", image: "rozalin-zyti.jpg" },
          { id: "black", label: "Ø£Ø³ÙˆØ¯",  hex: "#111827", image: "rozalin-black.jpg" }
        ]
      },
      formal: {
        id: "formal",
        name: "Ø·Ù‚Ù… ÙÙˆØ±Ù…Ø§Ù„ 3 Ù‚Ø·Ø¹",
        price: 699,
        oldPrice: 949,
        desc: "Ø®Ø§Ù…Ø© Ø±ÙˆØ²Ø§Ù„ÙŠÙ† Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù…Ù† 65 Ù„Ø­Ø¯ 85 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§.",
        mainImage: "formal-main.jpg",
        colors: [
          { id: "ment",     label: "Ù…Ù†Øª",      hex: "#86efac", image: "formal-ment.jpg" },
          { id: "babyblue", label: "Ø¨ÙŠØ¨ÙŠ Ø¨Ù„Ùˆ", hex: "#bfdbfe", image: "formal-babyblue.jpg" },
          { id: "beige",    label: "Ø¨ÙŠØ¬",      hex: "#f3e9dd", image: "formal-beige.jpg" },
          { id: "havan",    label: "Ù‡Ø§ÙØ§Ù†",    hex: "#b9936c", image: "formal-havan.jpg" },
          { id: "black",    label: "Ø£Ø³ÙˆØ¯",     hex: "#111827", image: "formal-black.jpg" }
        ]
      },
      toonz: {
        id: "toonz",
        name: "ØªÙˆÙ†Ø² Ù‚Ø·Ø¹ØªÙŠÙ†",
        price: 799,
        oldPrice: 1199,
        desc: "Ø®Ø§Ù…Ø© Ø´Ù…ÙˆØ§Ù‡ ÙÙŠ Ø´Ù…ÙˆØ§Ù‡ â€“ Ø³Ø§ÙŠØ² Ù…Ù† 60 Ù„Ø­Ø¯ 90 ÙƒÙŠÙ„Ùˆ Ù…Ø±ØªØ§Ø­.",
        mainImage: "toonz-main.jpg",
        colors: [
          { id: "beige",  label: "Ø¨ÙŠØ¬",   hex: "#f3e9dd", image: "toonz-beige.jpg" },
          { id: "olive",  label: "Ø²ÙŠØªÙŠ",  hex: "#4b7f52", image: "toonz-olive.jpg" },
          { id: "pink",   label: "Ø¨ÙŠÙ†Ùƒ",  hex: "#f9a8d4", image: "toonz-pink.jpg" },
          { id: "purple", label: "Ø¨Ù†ÙØ³Ø¬ÙŠ", hex: "#a855f7", image: "toonz-purple.jpg" },
          { id: "wine",   label: "Ù†Ø¨ÙŠØªÙŠ", hex: "#7f1d1d", image: "toonz-wine.jpg" }
        ]
      },
      abaya: {
        id: "abaya",
        name: "Ø¹Ø¨Ø§ÙŠØ© Ø²Ø±Ø§ÙŠØ± ÙƒØ¨Ø³",
        price: 749,
        oldPrice: 1049,
        desc: "Ø¬ÙˆØ® Ù„ÙŠÙƒØ±Ø§ Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù„Ø­Ø¯ 80 ÙƒÙŠÙ„Ùˆ Ù…Ø±ØªØ§Ø­.",
        mainImage: "abaya-main.jpg",
        colors: [
          { id: "black",    label: "Ø£Ø³ÙˆØ¯",     hex: "#111827", image: "abaya-black.jpg" },
          { id: "green",    label: "Ø²ÙŠØªÙŠ",     hex: "#4b7f52", image: "abaya-green.jpg" },
          { id: "burgundy", label: "Ù†Ø¨ÙŠØªÙŠ",    hex: "#7f1d1d", image: "abaya-burgundy.jpg" },
          { id: "caramel",  label: "ÙƒØ§Ø±Ø§Ù…ÙŠÙ„",  hex: "#b9936c", image: "abaya-caramel.jpg" },
          { id: "darkgray", label: "Ø±Ù…Ø§Ø¯ÙŠ ØºØ§Ù…Ù‚", hex: "#4b5563", image: "abaya-darkgray.jpg" },
          { id: "lightgray",label: "Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­", hex: "#d1d5db", image: "abaya-lightgray.jpg" }
        ]
      }
    };

    const CART_KEY = "tefa_cart_v1";

    const params = new URLSearchParams(window.location.search);
    const productId = params.get("id") || "rozalin";
    const product = PRODUCTS[productId] || PRODUCTS.rozalin;

    const elImage = document.getElementById("product-image");
    const elTitle = document.getElementById("product-title");
    const elPrice = document.getElementById("product-price");
    const elOldPrice = document.getElementById("product-old-price");
    const elDesc = document.getElementById("product-desc");
    const elColorRow = document.getElementById("color-row");
    const elQtyValue = document.getElementById("qty-value");
    const elCartCount = document.getElementById("cart-count");
    const elToast = document.getElementById("toast");
    const elToastText = document.getElementById("toast-text");
    const elToastColor = document.getElementById("toast-color");

    let selectedColor = null;
    let quantity = 1;

    function renderProduct() {
      elImage.src = product.mainImage;
      elTitle.textContent = product.name;
      elPrice.textContent = product.price + " Ø¬";
      elOldPrice.textContent = product.oldPrice + " Ø¬";
      elDesc.textContent = product.desc;

      elColorRow.innerHTML = "";
      product.colors.forEach((c, index) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "color-dot";
        btn.style.setProperty("--color", c.hex);
        btn.dataset.colorId = c.id;
        btn.dataset.colorLabel = c.label;
        btn.dataset.image = c.image;
        if (index === 0) {
          btn.classList.add("selected");
          selectedColor = c;
          elImage.src = c.image || product.mainImage;
        }
        btn.addEventListener("click", () => {
          document.querySelectorAll(".color-dot").forEach(b => b.classList.remove("selected"));
          btn.classList.add("selected");
          selectedColor = c;
          elImage.src = c.image || product.mainImage;
        });
        elColorRow.appendChild(btn);
      });
    }

    function loadCart() {
      try {
        const raw = localStorage.getItem(CART_KEY);
        return raw ? JSON.parse(raw) : [];
      } catch {
        return [];
      }
    }

    function saveCart(cart) {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartBadge();
    }

    function updateCartBadge() {
      const cart = loadCart();
      const totalQty = cart.reduce((sum, item) => sum + item.quantity, 0);
      if (totalQty > 0) {
        elCartCount.textContent = totalQty;
        elCartCount.style.display = "flex";
      } else {
        elCartCount.style.display = "none";
      }
    }

    function showToast(message, colorHex) {
      elToastText.textContent = message;
      if (colorHex) {
        elToastColor.style.background = colorHex;
      }
      elToast.classList.add("show");
      setTimeout(() => elToast.classList.remove("show"), 1800);
    }

    document.getElementById("qty-plus").addEventListener("click", () => {
      quantity = Math.min(20, quantity + 1);
      elQtyValue.textContent = quantity;
    });

    document.getElementById("qty-minus").addEventListener("click", () => {
      quantity = Math.max(1, quantity - 1);
      elQtyValue.textContent = quantity;
    });

    document.getElementById("add-to-cart").addEventListener("click", () => {
      if (!selectedColor) {
        showToast("Ø§Ø®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙˆÙ† Ø£ÙˆÙ„Ø§Ù‹ ğŸ’¡", null);
        return;
      }
      const cart = loadCart();

      // Ù†Ø­Ø§ÙˆÙ„ Ù†Ø¬Ù…Ø¹ Ù†ÙØ³ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ + Ù†ÙØ³ Ø§Ù„Ù„ÙˆÙ†
      const existing = cart.find(
        item => item.productId === product.id && item.colorId === selectedColor.id
      );

      if (existing) {
        existing.quantity += quantity;
      } else {
        cart.push({
          productId: product.id,
          productName: product.name,
          price: product.price,
          colorId: selectedColor.id,
          colorLabel: selectedColor.label,
          colorHex: selectedColor.hex,
          quantity: quantity
        });
      }

      saveCart(cart);
      showToast(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${selectedColor.label} Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© ğŸ›’`, selectedColor.hex);
      quantity = 1;
      elQtyValue.textContent = "1";
    });

    // ØªØ´ØºÙŠÙ„
    renderProduct();
    updateCartBadge();
  </script>
</body>
</html>