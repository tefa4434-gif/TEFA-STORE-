<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>TEFA STORE | ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 font-sans">

<!-- Ù‡ÙŠØ¯Ø± Ø¨Ø³ÙŠØ· -->
<header class="bg-white shadow p-4 flex justify-between items-center sticky top-0 z-40">
  <a href="index.html" class="text-sm">â¬… Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ØªØ¬Ø±</a>
  <span class="font-bold text-lg">TEFA STORE</span>
  <a href="cart.html" class="text-2xl">ğŸ›’</a>
</header>

<!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù†ØªØ¬ -->
<main class="max-w-md mx-auto p-4">
  <div id="productContainer"></div>
</main>

<script>
// ======================= Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª =======================
const PRODUCTS = {
  rozalin: {
    name: "Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ† 3 Ù‚Ø·Ø¹",
    price: 749,
    oldPrice: 999,
    mainImg: "rozalin-main.jpg",
    desc: "Ø®Ø§Ù…Ø© Ø±ÙˆØ²Ø§Ù„ÙŠÙ† Ù…Ø³ØªÙˆØ±Ø¯Ø© â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² Ù…Ù† 60 Ù„Ù€ 95 Ùƒ.",
    colors: [
      { label: "Ø³ÙŠÙ…ÙˆÙ†", hex: "#f4a6a6" },
      { label: "Ù…ÙˆÙ",   hex: "#7c3aed" },   // âœ… Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯
      { label: "Ø£Ø³ÙˆØ¯", hex: "#000000" },
      { label: "Ø²ÙŠØªÙŠ", hex: "#4b7351" },
      { label: "Ø¨ÙŠØ¬",  hex: "#ead7b7" },
      { label: "Ø¨Ù†ÙŠ",  hex: "#8b5a2b" }
    ]
  },

  formal: {
    name: "Ø·Ù‚Ù… ÙÙˆØ±Ù…Ø§Ù„ 3 Ù‚Ø·Ø¹",
    price: 699,
    oldPrice: 949,
    mainImg: "formal-main.jpg",
    desc: "Ø®Ø§Ù…Ø© Ø±ÙˆØ²Ø§Ù„ÙŠÙ† Ù…Ø³ØªÙˆØ±Ø¯Ø© â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ Ù…Ù† 65 Ù„Ù€ 85 Ùƒ.",
    colors: [
      { label: "Ù…Ù†Øª",      hex: "#98ff98" },
      { label: "Ø¨ÙŠØ¨ÙŠ Ø¨Ù„Ùˆ", hex: "#a7c7ff" },
      { label: "Ø¨ÙŠØ¬",      hex: "#ead7b7" },
      { label: "Ù‡Ø§ÙØ§Ù†",    hex: "#8b5a2b" },
      { label: "Ø£Ø³ÙˆØ¯",     hex: "#000000" }
    ]
  },

  toonz: {
    name: "ØªÙˆÙ†Ø² â€“ Ù‚Ø·Ø¹ØªÙŠÙ†",
    price: 799,
    oldPrice: 1199,
    mainImg: "toonz-main.jpg",
    desc: "Ø´Ù…ÙˆØ§Ù‡ Ã— Ø´Ù…ÙˆØ§Ù‡ â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² Ù…Ù† 60 Ù„Ù€ 90 Ùƒ.",
    colors: [
      { label: "Ø£Ø²Ø±Ù‚",  hex: "#1e3a8a" },
      { label: "Ø¨ÙŠÙ†Ùƒ",  hex: "#ec4899" },
      { label: "Ø¨ÙŠØ¬",   hex: "#ead7b7" },
      { label: "Ø²ÙŠØªÙŠ",  hex: "#6b8f71" },
      { label: "Ù†Ø¨ÙŠØªÙŠ", hex: "#6d1b1b" },
      { label: "Ù…ÙˆÙ",   hex: "#7c3aed" }
    ]
  },

  abaya_btn: {
    name: "Ø¹Ø¨Ø§ÙŠØ© Ø²Ø±Ø§ÙŠØ± ÙƒØ¨Ø³",
    price: 749,
    oldPrice: 1049,
    // ØªØ£ÙƒØ¯ Ø¥Ù† ØµÙˆØ±Ø© Ø§Ù„ÙƒÙˆÙ„Ø§Ø¬ Ù…Ø±ÙÙˆØ¹Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø§Ø³Ù…
    mainImg: "abaya-btn-main.jpg",
    desc: "Ø¬ÙˆØ® Ù„ÙŠÙƒØ±Ø§ Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø© â€“ ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù„Ø­Ø¯ 80Ùƒ.",
    colors: [
      { label: "ÙƒØ±Ø§Ù…ÙŠÙ„",     hex: "#c19a6b" },
      { label: "Ù†Ø¨ÙŠØªÙŠ",      hex: "#6b1b1b" },
      { label: "Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­", hex: "#d1d5db" },
      { label: "Ø²ÙŠØªÙŠ",       hex: "#6b8f71" },
      { label: "Ø£Ø³ÙˆØ¯",       hex: "#000000" },
      { label: "Ø±Ù…Ø§Ø¯ÙŠ ØºØ§Ù…Ù‚", hex: "#374151" }
    ]
  }
};

// ======================= ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù€ URL =======================
const params = new URLSearchParams(location.search);
const productId = params.get("id") || "rozalin";
const product = PRODUCTS[productId] || PRODUCTS.rozalin;

let selectedColorIndex = 0;
let qty = 1;

// ======================= Ø±Ø³Ù… ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬ =======================
const container = document.getElementById("productContainer");

container.innerHTML = `
  <div class="bg-white rounded-3xl shadow p-4">
    <img id="mainImg"
         src="${product.mainImg}"
         alt="${product.name}"
         class="w-full rounded-2xl mb-4 object-cover">

    <div class="text-right mb-4">
      <h1 class="text-2xl font-extrabold mb-1">${product.name}</h1>
      <div class="flex items-baseline justify-end gap-2">
        ${product.oldPrice ? `<span class="line-through text-gray-400 text-sm">${product.oldPrice} Ø¬</span>` : ""}
        <span class="text-3xl font-extrabold text-black">${product.price} Ø¬</span>
      </div>
      <p class="text-gray-700 mt-2 text-sm md:text-base">
        ${product.desc}
      </p>
    </div>

    <div class="flex justify-between items-center mb-2">
      <span class="text-sm text-gray-700 font-semibold">Ø§Ø®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙˆÙ†</span>
    </div>
    <div id="colorsRow" class="flex flex-wrap gap-3 mb-4"></div>

    <div class="flex justify-between items-center mb-2">
      <span class="text-sm text-gray-700 font-semibold">Ø§Ù„ÙƒÙ…ÙŠØ©</span>
    </div>
    <div class="flex items-center justify-start gap-4 mb-6">
      <button id="decQty"
        class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-xl">-</button>
      <span id="qtyValue" class="text-xl font-bold">1</span>
      <button id="incQty"
        class="w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-xl">+</button>
    </div>

    <button id="addToCartBtn"
      class="bg-black text-white w-full py-4 rounded-2xl text-xl font-extrabold">
      Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
    </button>
  </div>
`;

// ======================= ØªÙ‡ÙŠØ¦Ø© Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù† =======================
const colorsRow = document.getElementById("colorsRow");
const mainImg   = document.getElementById("mainImg");
const qtyValue  = document.getElementById("qtyValue");
const incQtyBtn = document.getElementById("incQty");
const decQtyBtn = document.getElementById("decQty");
const addBtn    = document.getElementById("addToCartBtn");

const colorDots = [];

product.colors.forEach((col, idx) => {
  const dot = document.createElement("span");
  dot.className =
    "w-10 h-10 rounded-full border border-gray-300 cursor-pointer transition";
  dot.style.backgroundColor = col.hex;
  dot.dataset.index = idx;
  colorsRow.appendChild(dot);
  colorDots.push(dot);
});

// ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ØªØ§Ø±
function updateSelectedColor() {
  colorDots.forEach((dot, idx) => {
    if (idx === selectedColorIndex) {
      dot.classList.add("ring-2", "ring-black");
    } else {
      dot.classList.remove("ring-2", "ring-black");
    }
  });

  // Ù†Ø±Ø¬Ø¹ Ø¯Ø§ÙŠÙ…Ù‹Ø§ Ù„Ù„ØµÙˆØ±Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù…ÙÙŠØ´ ØµÙˆØ± Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ Ù„ÙˆÙ† Ø­Ø§Ù„ÙŠÙ‹Ø§)
  mainImg.src = product.mainImg;
}

// Ø£ÙˆÙ„ Ù„ÙˆÙ† Ù…Ø®ØªØ§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
updateSelectedColor();

colorsRow.addEventListener("click", (e) => {
  const dot = e.target.closest("span");
  if (!dot) return;
  const idx = parseInt(dot.dataset.index, 10);
  if (isNaN(idx)) return;
  selectedColorIndex = idx;
  updateSelectedColor();
});

// ======================= Ø§Ù„ÙƒÙ…ÙŠØ© =======================
incQtyBtn.addEventListener("click", () => {
  qty++;
  qtyValue.textContent = qty;
});

decQtyBtn.addEventListener("click", () => {
  if (qty > 1) {
    qty--;
    qtyValue.textContent = qty;
  }
});

// ======================= Ø§Ù„Ø³Ù„Ø© (localStorage) =======================
function loadCart() {
  try {
    return JSON.parse(localStorage.getItem("cart") || "[]");
  } catch (e) {
    return [];
  }
}

function saveCart(cart) {
  localStorage.setItem("cart", JSON.stringify(cart));
}

addBtn.addEventListener("click", () => {
  const cart = loadCart();
  const selectedColor = product.colors[selectedColorIndex];

  cart.push({
    productId: productId,
    name: product.name,
    price: product.price,
    color: selectedColor.label,
    colorHex: selectedColor.hex,
    qty: qty
  });

  saveCart(cart);
  alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­");
});
</script>

</body>
</html>