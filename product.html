<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù† - TEFA STORE</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f3f3;
      color: #111;
      line-height: 1.6;
    }
    a { text-decoration: none; color: inherit; }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 16px;
    }

    header {
      background: #f3f3f3;
      padding: 12px 16px;
      border-bottom: 1px solid #ddd;
    }
    .header-inner {
      max-width: 900px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }
    .store-name {
      font-size: 20px;
      font-weight: 800;
    }
    .store-sub {
      font-size: 12px;
      color: #555;
    }

    .cart-icon-wrapper {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: #111;
      color: #fff;
    }
    .cart-badge {
      position: absolute;
      top: -4px;
      left: -4px;
      min-width: 18px;
      height: 18px;
      padding: 0 4px;
      border-radius: 999px;
      background: #ff3b30;
      color: #fff;
      font-size: 11px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
    }

    /* Product layout */
    .product-page {
      margin-top: 12px;
      background: #ffffff;
      border-radius: 18px;
      padding: 14px 14px 18px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.06);
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 720px) {
      .product-page {
        grid-template-columns: minmax(0, 1.05fr) minmax(0, 1fr);
      }
    }

    .product-image-wrapper {
      border-radius: 16px;
      overflow: hidden;
      background: #e5e5e5;
      display: flex;
      align-items: center;
      justify-content: center;
      max-height: 420px;
    }
    .product-image-wrapper img {
      width: 100%;
      height: 100%;
      max-height: 420px;
      object-fit: cover;
      display: block;
    }

    .product-info-title {
      font-size: 20px;
      font-weight: 800;
      margin-bottom: 4px;
    }
    .product-info-sub {
      font-size: 13px;
      color: #555;
      margin-bottom: 6px;
    }
    .product-info-line {
      font-size: 13px;
      color: #444;
    }

    .product-price-row {
      margin-top: 8px;
      display: flex;
      align-items: baseline;
      gap: 6px;
      font-size: 14px;
    }
    .product-price {
      font-size: 20px;
      font-weight: 900;
      color: #16a34a;
    }
    .product-oldprice {
      font-size: 12px;
      color: #9ca3af;
      text-decoration: line-through;
    }

    .colors-label {
      margin-top: 14px;
      font-size: 14px;
      font-weight: 700;
    }
    .colors-row {
      margin-top: 8px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .color-dot {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: 2px solid transparent;
      cursor: pointer;
      box-shadow: 0 0 0 1px rgba(0,0,0,0.06);
      transition: transform 0.1s ease, box-shadow 0.1s ease, border-color 0.1s ease;
    }
    .color-dot:hover {
      transform: scale(1.05);
    }
    .color-dot.selected {
      border-color: #111;
      box-shadow: 0 0 0 2px #1113;
    }

    .selected-color-text {
      margin-top: 6px;
      font-size: 13px;
      color: #333;
    }

    .qty-row {
      margin-top: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
    }
    .qty-controls {
      display: inline-flex;
      align-items: center;
      border-radius: 999px;
      border: 1px solid #ddd;
      overflow: hidden;
    }
    .qty-btn {
      width: 32px;
      height: 32px;
      border: none;
      background: #f3f3f3;
      font-size: 18px;
      cursor: pointer;
    }
    .qty-value {
      min-width: 32px;
      text-align: center;
      font-weight: 600;
      font-size: 15px;
    }

    .btn {
      border: none;
      cursor: pointer;
      border-radius: 999px;
      font-weight: 600;
      padding: 10px 16px;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }
    .btn-primary {
      background: #111;
      color: #fff;
      width: 100%;
      margin-top: 16px;
    }
    .btn-secondary {
      background: #fff;
      color: #111;
      border: 1px solid #ddd;
      width: 100%;
      margin-top: 8px;
      text-align: center;
    }

    .note {
      margin-top: 8px;
      font-size: 12px;
      color: #666;
    }

    .toast {
      position: fixed;
      bottom: 16px;
      right: 16px;
      background: #111;
      color: #fff;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 13px;
      display: none;
      align-items: center;
      gap: 6px;
      z-index: 50;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      max-width: 260px;
    }
  </style>
</head>
<body>
  <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header>
    <div class="header-inner">
      <div>
        <div class="store-name">TEFA STORE</div>
        <div class="store-sub">Ø§Ø®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙˆÙ† ÙˆØ§Ù„ÙƒÙ…ÙŠØ© ÙˆØ¨Ø¹Ø¯ÙŠÙ† ÙƒÙ…Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø³Ù„Ø©</div>
      </div>
      <a href="cart.html" class="cart-icon-wrapper" aria-label="Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª">
        <span>ğŸ›’</span>
        <div class="cart-badge" id="cart-count">0</div>
      </a>
    </div>
  </header>

  <main class="container">
    <section class="product-page">
      <div class="product-image-wrapper">
        <img id="product-image" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ù…Ø®ØªØ§Ø±">
      </div>

      <div>
        <h1 class="product-info-title" id="product-name">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</h1>
        <p class="product-info-sub" id="product-desc"></p>
        <p class="product-info-line" id="product-extra"></p>

        <div class="product-price-row">
          <span class="product-price" id="product-price"></span>
          <span class="product-oldprice" id="product-oldprice"></span>
        </div>

        <div class="colors-label">Ø§Ø®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙˆÙ† (Ø¯ÙˆØ§Ø¦Ø± Ø£Ù„ÙˆØ§Ù†):</div>
        <div class="colors-row" id="colors-row"></div>
        <div class="selected-color-text" id="selected-color-text">Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù„ÙˆÙ† Ø¨Ø¹Ø¯.</div>

        <div class="qty-row">
          <span>Ø§Ù„ÙƒÙ…ÙŠØ©:</span>
          <div class="qty-controls">
            <button type="button" class="qty-btn" id="qty-minus">âˆ’</button>
            <div class="qty-value" id="qty-value">1</div>
            <button type="button" class="qty-btn" id="qty-plus">+</button>
          </div>
        </div>

        <button class="btn btn-primary" id="add-to-cart-btn">
          Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
        </button>
        <a href="cart.html" class="btn btn-secondary">
          Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø³Ù„Ø©
        </a>

        <p class="note">
          ØªÙ‚Ø¯Ø±ÙŠ ØªØ¶ÙŠÙÙŠ ÙƒÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù„ÙŠ Ø¹Ø§ÙŠØ²Ø§Ù‡Ø§ Ù„Ù†ÙØ³ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„ØŒ ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ø³Ù„Ø© ØªØ¯Ø®Ù„ÙŠ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø£ÙˆØ±Ø¯Ø± âœ¨
        </p>
      </div>
    </section>
  </main>

  <div class="toast" id="toast">ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­ ğŸ¥°</div>

  <!-- ØµÙˆØª Ø¨Ø³ÙŠØ· Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ© (Ø­Ø·ÙŠ Ù…Ù„Ù notify.mp3 Ø¬Ù†Ø¨ Ø§Ù„ØµÙØ­Ø©) -->
  <audio id="add-sound">
    <source src="notify.mp3" type="audio/mpeg">
  </audio>

  <script>
    const CART_KEY = 'tefa_cart';

    function getCart() {
      try {
        return JSON.parse(localStorage.getItem(CART_KEY)) || [];
      } catch (e) {
        return [];
      }
    }

    function saveCart(cart) {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartCount();
    }

    function updateCartCount() {
      const cart = getCart();
      const count = cart.reduce((sum, item) => sum + (item.qty || 0), 0);
      const badge = document.getElementById('cart-count');
      if (!badge) return;
      badge.textContent = count;
      badge.style.visibility = count > 0 ? 'visible' : 'hidden';
    }

    // ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª + ØµÙˆØ± Ø§Ù„Ø£Ù„ÙˆØ§Ù†
    const PRODUCTS = {
      rozalin: {
        key: 'rozalin',
        code: 'RZ01',
        name: 'Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ† 3 Ù‚Ø·Ø¹',
        desc: 'Ø®Ø§Ù…Ø© Ø±ÙˆØ²Ø§Ù„ÙŠÙ† Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø©ØŒ Ù…Ù„Ù…Ø³ Ù†Ø§Ø¹Ù… ÙˆÙ‚ØµØ© Ù…Ø±ÙŠØ­Ø© ÙˆØ´ÙŠÙƒ.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù…Ù† 60 Ù„Ù€ 95 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 749,
        oldPrice: 999,
        mainImage: 'rozalin-main.jpg',
        colors: [
          { key: 'kafeh', label: 'ÙƒØ§ÙÙŠÙ‡', hex: '#8b5a2b', image: 'rozalin-kafeh.jpg' },
          { key: 'beige', label: 'Ø¨ÙŠØ¬',   hex: '#e3c8a3', image: 'rozalin-beige.jpg' },
          { key: 'mov',   label: 'Ù…ÙˆÙ',   hex: '#5b185e', image: 'rozalin-mov.jpg' },
          { key: 'zyti',  label: 'Ø²ÙŠØªÙŠ',  hex: '#3f5f3a', image: 'rozalin-zyti.jpg' },
          { key: 'black', label: 'Ø£Ø³ÙˆØ¯',  hex: '#111111', image: 'rozalin-black.jpg' },
          { key: 'simon', label: 'Ø³ÙŠÙ…ÙˆÙ†', hex: '#f8a8a0', image: 'rozalin-simon.jpg' }
        ]
      },
      formal: {
        key: 'formal',
        code: 'FR02',
        name: 'Ø·Ù‚Ù… ÙÙˆØ±Ù…Ø§Ù„ 3 Ù‚Ø·Ø¹',
        desc: 'Ø·Ù‚Ù… ÙÙˆØ±Ù…Ø§Ù„ 3 Ù‚Ø·Ø¹ Ø®Ø§Ù…Ø© Ø±ÙˆØ²Ø§Ù„ÙŠÙ† Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø©.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù…Ù† 65 Ù„Ù€ 85 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 699,
        oldPrice: 949,
        mainImage: 'formal-main.jpg',
        colors: [
          { key: 'ment',     label: 'Ù…Ù†Øª',      hex: '#3f7f6d', image: 'formal-ment.jpg' },
          { key: 'babyblue', label: 'Ø¨ÙŠØ¨ÙŠ Ø¨Ù„Ùˆ', hex: '#9fd3ff', image: 'formal-babyblue.jpg' },
          { key: 'beige',    label: 'Ø¨ÙŠØ¬',      hex: '#e3c8a3', image: 'formal-beige.jpg' },
          { key: 'havan',    label: 'Ù‡Ø§ÙØ§Ù†',    hex: '#8b5a2b', image: 'formal-havan.jpg' },
          { key: 'black',    label: 'Ø£Ø³ÙˆØ¯',     hex: '#111111', image: 'formal-black.jpg' }
        ]
      },
      abaya: {
        key: 'abaya',
        code: 'AB03',
        name: 'Ø¹Ø¨Ø§ÙŠØ© Ø²Ø±Ø§ÙŠØ± ÙƒØ¨Ø³',
        desc: 'Ø¹Ø¨Ø§ÙŠØ© Ø´ÙŠÙƒ Ø¨Ø®Ø§Ù…Ø© Ø¬ÙˆØ® Ù„ÙŠÙƒØ±Ø§ Ù…Ø³ØªÙˆØ±Ø¯ Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø©.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù„Ø­Ø¯ 80 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 749,
        oldPrice: 1049,
        mainImage: 'abaya-main.jpg',
        colors: [
          { key: 'black',    label: 'Ø£Ø³ÙˆØ¯',        hex: '#111111', image: 'abaya-black.jpg' },
          { key: 'green',    label: 'Ø²ÙŠØªÙŠ',        hex: '#4b6b4b', image: 'abaya-green.jpg' },
          { key: 'burgundy', label: 'Ø¹Ù†Ø§Ø¨ÙŠ',       hex: '#6a102b', image: 'abaya-burgundy.jpg' },
          { key: 'lightgray',label: 'Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­',  hex: '#d1d5db', image: 'abaya-lightgray.jpg' },
          { key: 'caramel',  label: 'ÙƒØ§Ø±Ø§Ù…ÙŠÙ„',     hex: '#c57a3a', image: 'abaya-caramel.jpg' },
          { key: 'darkgray', label: 'Ø±Ù…Ø§Ø¯ÙŠ ØºØ§Ù…Ù‚',  hex: '#4b5563', image: 'abaya-darkgray.jpg' }
        ]
      },
      toonz: {
        key: 'toonz',
        code: 'TZ04',
        name: 'Ø·Ù‚Ù… ØªÙˆÙ†Ø² Ù‚Ø·Ø¹ØªÙŠÙ†',
        desc: 'Ø·Ù‚Ù… ØªÙˆÙ†Ø² Ù‚Ø·Ø¹ØªÙŠÙ† Ø®Ø§Ù…Ø© Ø´Ù…ÙˆØ§Ù‡ ÙÙŠ Ø´Ù…ÙˆØ§Ù‡ Ù†Ø§Ø¹Ù…Ø© Ø¬Ø¯Ø§Ù‹.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: Ù…Ù† 60 Ù„Ù€ 90 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 799,
        oldPrice: 1199,
        mainImage: 'toonz-main.jpg',
        colors: [
          { key: 'beige',   label: 'Ø¨ÙŠØ¬',      hex: '#e3c8a3', image: 'toonz-beige.jpg' },
          { key: 'olive',   label: 'Ø²ÙŠØªÙŠ',     hex: '#3f5f3a', image: 'toonz-olive.jpg' },
          { key: 'wine',    label: 'Ù†Ø¨ÙŠØªÙŠ',    hex: '#7f1d1d', image: 'toonz-wine.jpg' },
          { key: 'purple',  label: 'Ù…ÙˆÙ',      hex: '#6b21a8', image: 'toonz-purple.jpg' },
          { key: 'pink',    label: 'Ø¨Ù†ÙØ³Ø¬ÙŠ',   hex: '#f9a8d4', image: 'toonz-pink.jpg' }
        ]
      },

      /* Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© */

      coatdress: {
        key: 'coatdress',
        code: 'CD05',
        name: 'Ø¯Ø±ÙŠØ³ Ù‚Ø·Ø¹ØªÙŠÙ† Ø¨Ø§Ù„Ø·Ùˆ Ø¬ÙˆØ®',
        desc: 'Ø¨ÙŠØ²Ùƒ Ø±ÙŠØ¨ Ù…Ø¹ Ø¨Ø§Ù„Ø·Ùˆ Ø¬ÙˆØ® Ù„ÙŠÙƒØ±Ø§ Ù…Ø³ØªÙˆØ±Ø¯ â€“ Ø·Ù‚Ù… Ø´ÙŠÙƒ Ù„Ù„Ø®Ø±ÙˆØ¬Ø§Øª ÙˆØ§Ù„Ù…Ø´Ø§ÙˆÙŠØ±.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù„Ø­Ø¯ 85 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 849,
        oldPrice: 1049,
        mainImage: 'coatdress-main.jpg',
        colors: [
          { key: 'rose',     label: 'Ø±ÙˆØ²',       hex: '#f9a8d4', image: 'coatdress-rose.jpg' },
          { key: 'offwhite', label: 'Ø£ÙˆÙ ÙˆØ§ÙŠØª',  hex: '#f5f5f4', image: 'coatdress-offwhite.jpg' },
          { key: 'havan',    label: 'Ù‡Ø§ÙØ§Ù†',     hex: '#b45309', image: 'coatdress-havan.jpg' },
          { key: 'brown',    label: 'Ø¨Ù†ÙŠ',       hex: '#78350f', image: 'coatdress-brown.jpg' },
          { key: 'black',    label: 'Ø£Ø³ÙˆØ¯',      hex: '#111827', image: 'coatdress-black.jpg' },
          { key: 'olive',    label: 'Ø²ÙŠØªÙŠ',      hex: '#4b7350', image: 'coatdress-olive.jpg' }
        ]
      },

      velvetset: {
        key: 'velvetset',
        code: 'VG06',
        name: 'ÙƒÙˆÙ„ÙŠÙƒØ´Ù† Ø¯Ø±Ø³Ø§Øª Ù‚Ø·ÙŠÙØ© Ù…Ø¶Ù„Ø¹',
        desc: 'Ø®Ø§Ù…Ø© Ù‚Ø·ÙŠÙØ© Ù…Ø¶Ù„Ø¹ Ù…Ø³ØªÙˆØ±Ø¯Ø© â€“ Ù‚ØµØ§Øª ÙˆØ§Ø³Ø¹Ø© ÙˆØ´ÙŠÙƒ Ù„Ù„Ø®Ø±ÙˆØ¬Ø§Øª ÙˆØ§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: Ù…Ù† 65 Ù„Ù€ 85 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 649,
        oldPrice: 949,
        mainImage: 'velvetset-main.jpg',
        colors: [
          { key: 'green',  label: 'Ø²ÙŠØªÙŠ',      hex: '#166534', image: 'velvetset-green.jpg' },
          { key: 'navy',   label: 'ÙƒØ­Ù„ÙŠ',      hex: '#1d3557', image: 'velvetset-navy.jpg' },
          { key: 'camel',  label: 'Ø¬Ù…Ù„ÙŠ',      hex: '#d4a373', image: 'velvetset-camel.jpg' },
          { key: 'beige',  label: 'Ø¨ÙŠØ¬',       hex: '#e7d4b5', image: 'velvetset-beige.jpg' },
          { key: 'maroon', label: 'Ù†Ø¨ÙŠØªÙŠ',     hex: '#7f1d1d', image: 'velvetset-maroon.jpg' },
          { key: 'black',  label: 'Ø£Ø³ÙˆØ¯',      hex: '#111827', image: 'velvetset-black.jpg' }
        ]
      },

      zippercoat: {
        key: 'zippercoat',
        code: 'ZC07',
        name: 'Ø¯Ø±ÙŠØ³ Ø³ÙˆØ³ØªØ© ÙƒØ§Ø¨ÙŠØ´Ùˆ ÙØ±Ùˆ',
        desc: 'Ø¬ÙˆØ® Ù„ÙŠÙƒØ±Ø§ Ù…Ø³ØªÙˆØ±Ø¯ Ù…Ø¹ ÙƒØ§Ø¨ÙŠØ´Ùˆ ÙØ±Ùˆ â€“ Ù…Ø±ÙŠØ­ ÙˆØ¯Ø§ÙÙŠ Ø¬Ø¯Ø§Ù‹.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù„Ø­Ø¯ 85 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 649,
        oldPrice: 849,
        mainImage: 'zippercoat-main.jpg',
        colors: [
          { key: 'camel',  label: 'Ø¬Ù…Ù„ÙŠ',      hex: '#d4a373', image: 'zippercoat-camel.jpg' },
          { key: 'olive',  label: 'Ø²ÙŠØªÙŠ',      hex: '#4b7350', image: 'zippercoat-olive.jpg' },
          { key: 'beige',  label: 'Ø¨ÙŠØ¬',       hex: '#e7d4b5', image: 'zippercoat-beige.jpg' },
          { key: 'maroon', label: 'Ù†Ø¨ÙŠØªÙŠ',     hex: '#7f1d1d', image: 'zippercoat-maroon.jpg' },
          { key: 'black1', label: 'Ø£Ø³ÙˆØ¯ 1',    hex: '#111827', image: 'zippercoat-black1.jpg' },
          { key: 'black2', label: 'Ø£Ø³ÙˆØ¯ 2',    hex: '#020617', image: 'zippercoat-black2.jpg' }
        ]
      },

      beltdress: {
        key: 'beltdress',
        code: 'BD08',
        name: 'Ø¯Ø±ÙŠØ³ Ø³Ø§Ø¯Ù‡ ÙƒÙ… Ø¨Ù„ÙˆÙ†Ø© Ù…Ø¹ Ø­Ø²Ø§Ù…',
        desc: 'Ù‚Ø·ÙŠÙØ© Ù…Ø¶Ù„Ø¹ Ù…Ø³ØªÙˆØ±Ø¯Ø© Ø¨ÙƒÙ… Ø¨Ù„ÙˆÙ†Ø© ÙˆØ­Ø²Ø§Ù… Ø´ÙŠÙƒ ÙÙŠ Ø§Ù„ÙˆØ³Ø·.',
        extra: 'Ø§Ù„Ù…Ù‚Ø§Ø³: ÙˆØ§Ù† Ø³Ø§ÙŠØ² ØªÙ„Ø¨ÙŠØ³ Ù„Ø­Ø¯ 85 ÙƒÙŠÙ„Ùˆ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹.',
        price: 599,
        oldPrice: 799,
        mainImage: 'beltdress-main.jpg',
        colors: [
          { key: 'green',  label: 'Ø²ÙŠØªÙŠ',   hex: '#166534', image: 'beltdress-green.jpg' },
          { key: 'navy',   label: 'ÙƒØ­Ù„ÙŠ',   hex: '#1d3557', image: 'beltdress-navy.jpg' },
          { key: 'camel',  label: 'Ø¬Ù…Ù„ÙŠ',   hex: '#d4a373', image: 'beltdress-camel.jpg' },
          { key: 'beige',  label: 'Ø¨ÙŠØ¬',    hex: '#e7d4b5', image: 'beltdress-beige.jpg' },
          { key: 'maroon', label: 'Ù†Ø¨ÙŠØªÙŠ',  hex: '#7f1d1d', image: 'beltdress-maroon.jpg' },
          { key: 'black',  label: 'Ø£Ø³ÙˆØ¯',   hex: '#111827', image: 'beltdress-black.jpg' }
        ]
      }
    };

    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    function showToast(message, colorHex) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      if (colorHex) {
        toast.style.background = colorHex;
        toast.style.color = '#fff';
      } else {
        toast.style.background = '#111';
        toast.style.color = '#fff';
      }
      toast.style.display = 'flex';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 1800);
    }

    document.addEventListener('DOMContentLoaded', () => {
      const productKey = getQueryParam('product') || 'rozalin';
      const product = PRODUCTS[productKey] || PRODUCTS['rozalin'];

      const imgEl = document.getElementById('product-image');
      const nameEl = document.getElementById('product-name');
      const descEl = document.getElementById('product-desc');
      const extraEl = document.getElementById('product-extra');
      const priceEl = document.getElementById('product-price');
      const oldPriceEl = document.getElementById('product-oldprice');
      const colorsRow = document.getElementById('colors-row');
      const selectedColorText = document.getElementById('selected-color-text');

      nameEl.textContent = product.name;
      descEl.textContent = product.desc;
      extraEl.textContent = product.extra;
      priceEl.textContent = product.price + ' Ø¬';
      oldPriceEl.textContent = product.oldPrice + ' Ø¬';
      imgEl.src = product.mainImage;

      let selectedColorKey = null;
      let selectedColorObj = null;

      // Ø±Ø³Ù… Ø¯ÙˆØ§Ø¦Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù†
      product.colors.forEach(color => {
        const dot = document.createElement('button');
        dot.type = 'button';
        dot.className = 'color-dot';
        dot.style.backgroundColor = color.hex;
        dot.setAttribute('aria-label', color.label);

        dot.addEventListener('click', () => {
          document.querySelectorAll('.color-dot').forEach(d => d.classList.remove('selected'));
          dot.classList.add('selected');
          selectedColorKey = color.key;
          selectedColorObj = color;
          selectedColorText.textContent = 'Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù…Ø®ØªØ§Ø±: ' + color.label;
          imgEl.src = color.image || product.mainImage;
        });

        colorsRow.appendChild(dot);
      });

      // ÙƒÙ…ÙŠØ©
      const qtyValueEl = document.getElementById('qty-value');
      document.getElementById('qty-plus').addEventListener('click', () => {
        let v = parseInt(qtyValueEl.textContent, 10) || 1;
        if (v < 20) v++;
        qtyValueEl.textContent = v;
      });
      document.getElementById('qty-minus').addEventListener('click', () => {
        let v = parseInt(qtyValueEl.textContent, 10) || 1;
        if (v > 1) v--;
        qtyValueEl.textContent = v;
      });

      // Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©
      document.getElementById('add-to-cart-btn').addEventListener('click', () => {
        if (!selectedColorObj) {
          alert('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ø®ØªØ§Ø±ÙŠ Ù„ÙˆÙ† Ø§Ù„Ø£ÙˆÙ„ ğŸ’œ');
          return;
        }
        const qty = parseInt(qtyValueEl.textContent, 10) || 1;

        const cart = getCart();

        const existing = cart.find(
          item => item.productKey === product.key && item.colorKey === selectedColorKey
        );

        if (existing) {
          existing.qty += qty;
        } else {
          cart.push({
            id: Date.now(),
            productKey: product.key,
            code: product.code || '',
            name: product.name,
            price: product.price,
            qty: qty,
            colorKey: selectedColorKey,
            colorName: selectedColorObj.label,
            colorLabel: selectedColorObj.label,
            colorText: selectedColorObj.label,
            colorHex: selectedColorObj.hex,
            color: selectedColorObj.hex,
            image: selectedColorObj.image || product.mainImage
          });
        }

        saveCart(cart);

        const sound = document.getElementById('add-sound');
        if (sound && sound.play) {
          try {
            sound.currentTime = 0;
            sound.play().catch(() => {});
          } catch (e) {}
        }

        showToast('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆÙ† ' + selectedColorObj.label + ' Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­ ğŸ¥°', selectedColorObj.hex);
      });

      updateCartCount();
      window.addEventListener('storage', (e) => {
        if (e.key === CART_KEY) updateCartCount();
      });
    });
  </script>
</body>
</html>