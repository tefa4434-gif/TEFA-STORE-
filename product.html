<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ | TEFA STORE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f5f5f7;
      color: #111827;
    }

    header {
      background: #111827;
      color: #fff;
      padding: 12px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .cart-icon {
      position: relative;
      font-size: 20px;
      text-decoration: none;
      color: #fff;
    }

    .cart-badge {
      position: absolute;
      top: -6px;
      left: -8px;
      background: #ef4444;
      color: #fff;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 999px;
    }

    main {
      max-width: 520px;
      margin: auto;
      padding: 16px;
    }

    .product-image {
      width: 100%;
      border-radius: 18px;
      margin-bottom: 14px;
      object-fit: cover;
    }

    h1 {
      font-size: 20px;
      margin-bottom: 6px;
    }

    .price {
      font-size: 22px;
      font-weight: 800;
      color: #16a34a;
      margin-bottom: 10px;
    }

    .old-price {
      text-decoration: line-through;
      color: #9ca3af;
      font-size: 14px;
    }

    .section-title {
      font-size: 15px;
      font-weight: 700;
      margin: 14px 0 8px;
    }

    .colors {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .color-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 2px solid transparent;
      cursor: pointer;
    }

    .color-btn.active {
      border-color: #111827;
    }

    .qty-box {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 12px 0;
    }

    .qty-btn {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 1px solid #e5e7eb;
      background: #fff;
      font-size: 20px;
      cursor: pointer;
    }

    .add-btn {
      width: 100%;
      padding: 14px;
      border-radius: 999px;
      border: none;
      background: #111827;
      color: #fff;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      margin-top: 10px;
      opacity: 0.6;
    }

    .add-btn.enabled {
      opacity: 1;
    }

    .success-msg {
      margin-top: 10px;
      padding: 10px;
      text-align: center;
      border-radius: 10px;
      display: none;
      color: #fff;
      font-size: 14px;
    }
  </style>
</head>

<body>

<header>
  <a href="index.html" style="color:#fff;text-decoration:none;">â† Ø±Ø¬ÙˆØ¹</a>
  <a href="cart.html" class="cart-icon">
    ğŸ›’
    <span class="cart-badge" id="cartCount">0</span>
  </a>
</header>

<main>
  <!-- ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ -->
  <img id="productImage" src="images/rozalin-main.jpg" class="product-image" />

  <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† ÙˆØ§Ù„Ø³Ø¹Ø± -->
  <h1 id="productName">Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ† 3 Ù‚Ø·Ø¹</h1>
  <div class="price">
    749 Ø¬
    <span class="old-price">999 Ø¬</span>
  </div>

  <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ÙˆÙ† -->
  <div class="section-title">Ø§Ø®ØªØ§Ø±ÙŠ Ø§Ù„Ù„ÙˆÙ†</div>
  <div class="colors" id="colorList"></div>

  <!-- Ø§Ù„ÙƒÙ…ÙŠØ© -->
  <div class="qty-box">
    <button class="qty-btn" onclick="changeQty(-1)">âˆ’</button>
    <span id="qty">1</span>
    <button class="qty-btn" onclick="changeQty(1)">+</button>
  </div>

  <!-- Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
  <button class="add-btn" id="addBtn" onclick="addToCart()">
    Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
  </button>

  <div class="success-msg" id="successMsg">
    âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆÙ† Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©
  </div>
</main>

<script>
  const CART_KEY = "tefa_cart";

  const product = {
    name: "Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ† 3 Ù‚Ø·Ø¹",
    price: 749,
    colors: [
      { name: "ÙƒØ§ÙÙŠÙ‡", code: "#a88962", image: "images/rozalin-coffee.jpg" },
      { name: "Ø¨ÙŠØ¬", code: "#e7d7b2", image: "images/rozalin-beige.jpg" },
      { name: "Ù…ÙˆÙ", code: "#7e5a9b", image: "images/rozalin-move.jpg" },
      { name: "Ø²ÙŠØªÙŠ", code: "#556b2f", image: "images/rozalin-olive.jpg" },
      { name: "Ø£Ø³ÙˆØ¯", code: "#000000", image: "images/rozalin-black.jpg" },
      { name: "Ø³ÙŠÙ…ÙˆÙ†", code: "#f2a28f", image: "images/rozalin-simon.jpg" }
    ]
  };

  let selectedColor = null;
  let qty = 1;

  const colorList = document.getElementById("colorList");
  const productImage = document.getElementById("productImage");
  const addBtn = document.getElementById("addBtn");
  const successMsg = document.getElementById("successMsg");

  product.colors.forEach((color, index) => {
    const btn = document.createElement("div");
    btn.className = "color-btn";
    btn.style.background = color.code;
    btn.onclick = () => selectColor(index, btn);
    colorList.appendChild(btn);
  });

  function selectColor(index, btn) {
    document.querySelectorAll(".color-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    selectedColor = product.colors[index];
    productImage.src = selectedColor.image;
    addBtn.classList.add("enabled");
  }

  function changeQty(delta) {
    qty = Math.max(1, qty + delta);
    document.getElementById("qty").textContent = qty;
  }

  function loadCart() {
    try {
      return JSON.parse(localStorage.getItem(CART_KEY)) || [];
    } catch {
      return [];
    }
  }

  function saveCart(cart) {
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    updateCartCount();
  }

  function updateCartCount() {
    const cart = loadCart();
    const count = cart.reduce((s, i) => s + (i.qty || 1), 0);
    document.getElementById("cartCount").textContent = count;
  }

  function addToCart() {
    if (!selectedColor) return;

    const cart = loadCart();

    cart.push({
      name: product.name,
      price: product.price,
      colorName: selectedColor.name,
      colorCode: selectedColor.code,
      image: selectedColor.image,
      qty: qty
    });

    saveCart(cart);

    successMsg.style.background = selectedColor.code;
    successMsg.style.display = "block";

    setTimeout(() => {
      successMsg.style.display = "none";
    }, 1200);
  }

  updateCartCount();
</script>

</body>
</html>