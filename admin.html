<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª | TEFA STORE</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link
    href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap"
    rel="stylesheet"
  />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: "Cairo", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
    }
    body {
      background: #0f172a;
      color: #e5e7eb;
    }
    .wrap {
      max-width: 1000px;
      margin: 24px auto 40px;
      padding: 0 16px;
    }
    h1 {
      font-size: 20px;
      font-weight: 800;
      margin-bottom: 4px;
    }
    .subtitle {
      font-size: 13px;
      color: #9ca3af;
      margin-bottom: 16px;
    }
    .card {
      background: #020617;
      border-radius: 18px;
      padding: 14px 14px 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
      margin-bottom: 16px;
      border: 1px solid #1e293b;
    }
    .card-title {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }
    .tag {
      font-size: 11px;
      border-radius: 999px;
      padding: 2px 8px;
      background: #1d4ed8;
      color: #e5e7eb;
    }
    .stat {
      font-size: 13px;
      color: #9ca3af;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8px;
      font-size: 13px;
    }
    th,
    td {
      padding: 6px 4px;
      border-bottom: 1px solid #1f2937;
      text-align: right;
    }
    th {
      font-weight: 600;
      color: #9ca3af;
    }
    .color-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 1px solid #111827;
      display: inline-block;
      margin-left: 4px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 40px;
      height: 20px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #4b5563;
      transition: 0.2s;
      border-radius: 999px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: 0.2s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #16a34a;
    }
    input:checked + .slider:before {
      transform: translateX(20px);
    }

    .btn-save {
      margin-top: 10px;
      border-radius: 999px;
      border: none;
      padding: 8px 14px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      background: #22c55e;
      color: #022c22;
    }
    .save-status {
      font-size: 12px;
      color: #a5b4fc;
      margin-top: 4px;
    }
    .top-links {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }
    .top-link {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid #1e293b;
      background: #020617;
      color: #e5e7eb;
      text-decoration: none;
    }
  </style>
</head>
<body>
<div class="wrap">
  <h1>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… - Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</h1>
  <p class="subtitle">
    Ù‡Ù†Ø§ ØªÙ‚Ø¯Ø± ØªÙˆÙ‚Ù Ø£Ùˆ ØªØ´ØºÙ‘Ù„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„ÙƒÙ„ Ù…ÙˆØ¯ÙŠÙ„. Ù„Ù…Ø§ ØªÙˆÙ‚Ù Ù„ÙˆÙ†ØŒ Ø¨ÙŠØ®ØªÙÙŠ Ù…Ù† ØµÙØ­Ø©
    Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¹Ù†Ø¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ ğŸ‘—
  </p>

  <div class="top-links">
    <a href="index.html" class="top-link">â¬… Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ØªØ¬Ø±</a>
    <a href="product.html?product=rozalin" class="top-link">ØµÙØ­Ø© Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ†</a>
    <a href="product.html?product=formal" class="top-link">ØµÙØ­Ø© Ø·Ù‚Ù… ÙÙˆØ±Ù…Ø§Ù„</a>
    <a href="product.html?product=abaya" class="top-link">ØµÙØ­Ø© Ø§Ù„Ø¹Ø¨Ø§ÙŠØ©</a>
    <a href="product.html?product=toonz" class="top-link">ØµÙØ­Ø© Ù…ÙˆØ¯ÙŠÙ„ ØªÙˆÙ†Ø²</a>
  </div>

  <!-- ÙƒØ§Ø±Øª Ø¨Ø³ÙŠØ· Ù„Ø¥Ø­ØµØ§Ø¡ ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø² -->
  <section class="card">
    <div class="card-title">
      <span>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ø³ÙŠØ·Ø©</span>
      <span class="tag">Ù…Ø­Ù„ÙŠ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø² ÙÙ‚Ø·</span>
    </div>
    <p class="stat">
      Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø±Ø§Øª Ø§Ù„Ù„ÙŠ ÙØªØ­Øª ÙÙŠÙ‡Ø§ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²:
      <strong id="visit-count">0</strong> Ù…Ø±Ø©
    </p>
  </section>

  <!-- Ø¥Ø¯Ø§Ø±Ø© Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª -->
  <section class="card">
    <div class="card-title">
      <span>Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª</span>
      <span class="tag">Ù…Ø±ØªØ¨Ø· Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬</span>
    </div>
    <p class="stat">
      Ø´ÙŠÙ„ Ø¹Ù„Ø§Ù…Ø© Ø§Ù„ØªÙØ¹ÙŠÙ„ Ù…Ù† Ø£ÙŠ Ù„ÙˆÙ† Ø¹Ø´Ø§Ù† ÙŠØªÙˆÙ‚Ù ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬ØŒ Ùˆ Ø§Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª.
    </p>

    <div id="products-colors"></div>

    <button class="btn-save" onclick="saveColors()">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
    <div class="save-status" id="save-status"></div>
  </section>
</div>

<script>
  // Ù†ÙØ³ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ù„ÙŠ product.html Ø¨ÙŠÙ‚Ø±Ø§Ù‡
  const COLOR_STATUS_KEY = "tefa_color_status";

  // Ù†ÙØ³ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª Ùˆ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù„ÙŠ ÙÙŠ product.html (keys + Ø£Ø³Ù…Ø§Ø¡)
  const PRODUCTS = {
    rozalin: {
      id: "rozalin",
      title: "Ø·Ù‚Ù… Ø±ÙˆØ²Ø§Ù„ÙŠÙ† 3 Ù‚Ø·Ø¹",
      colors: [
        { key: "kafeh", label: "ÙƒØ§ÙÙŠÙ‡",   code: "#8b5a2b" },
        { key: "beige", label: "Ø¨ÙŠØ¬",     code: "#e3c8a3" },
        { key: "mov",   label: "Ù…ÙˆÙ",     code: "#5b185e" },
        { key: "zyti",  label: "Ø²ÙŠØªÙŠ",    code: "#3f5f3a" },
        { key: "black", label: "Ø£Ø³ÙˆØ¯",    code: "#111111" },
        { key: "simon", label: "Ø³ÙŠÙ…ÙˆÙ†",   code: "#f8a8a0" }
      ]
    },
    formal: {
      id: "formal",
      title: "Ø·Ù‚Ù… ÙÙˆØ±Ù…Ø§Ù„ 3 Ù‚Ø·Ø¹",
      colors: [
        { key: "ment",     label: "Ù…Ù†Øª",      code: "#3f7f6d" },
        { key: "babyblue", label: "Ø¨ÙŠØ¨ÙŠ Ø¨Ù„Ùˆ", code: "#9fd3ff" },
        { key: "beige",    label: "Ø¨ÙŠØ¬",      code: "#e3c8a3" },
        { key: "havan",    label: "Ù‡Ø§ÙØ§Ù†",    code: "#8b5a2b" },
        { key: "black",    label: "Ø£Ø³ÙˆØ¯",     code: "#111111" }
      ]
    },
    abaya: {
      id: "abaya",
      title: "Ø¹Ø¨Ø§ÙŠØ© Ø²Ø±Ø§ÙŠØ± ÙƒØ¨Ø³",
      colors: [
        { key: "black",    label: "Ø£Ø³ÙˆØ¯",        code: "#111111" },
        { key: "green",    label: "Ø²ÙŠØªÙŠ",        code: "#4b6b4b" },
        { key: "burgundy", label: "Ø¹Ù†Ø§Ø¨ÙŠ",       code: "#6a102b" },
        { key: "lightgray",label: "Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­",  code: "#d1d5db" },
        { key: "caramel",  label: "ÙƒØ±Ø§Ù…ÙŠÙ„",     code: "#c57a3a" },
        { key: "darkgray", label: "Ø±Ù…Ø§Ø¯ÙŠ ØºØ§Ù…Ù‚",  code: "#4b5563" }
      ]
    },
    toonz: {
      id: "toonz",
      title: "Ø·Ù‚Ù… ØªÙˆÙ†Ø² Ù‚Ø·Ø¹ØªÙŠÙ†",
      colors: [
        { key: "beige",   label: "Ø¨ÙŠØ¬",      code: "#e3c8a3" },
        { key: "olive",   label: "Ø²ÙŠØªÙŠ",     code: "#3f5f3a" },
        { key: "wine",    label: "Ù†Ø¨ÙŠØªÙŠ",    code: "#7f1d1d" },
        { key: "purple",  label: "Ù…ÙˆÙ",      code: "#6b21a8" },
        { key: "pink",    label: "Ø¨Ù†ÙØ³Ø¬ÙŠ",   code: "#f9a8d4" }
      ]
    }
  };

  function loadColorStatus() {
    try {
      return JSON.parse(localStorage.getItem(COLOR_STATUS_KEY)) || {};
    } catch (e) {
      return {};
    }
  }

  function saveColorStatus(status) {
    localStorage.setItem(COLOR_STATUS_KEY, JSON.stringify(status));
  }

  function renderProductsColors() {
    const container = document.getElementById("products-colors");
    container.innerHTML = "";

    const status = loadColorStatus();

    Object.values(PRODUCTS).forEach((product) => {
      const box = document.createElement("div");
      box.style.marginTop = "10px";

      const titleRow = document.createElement("div");
      titleRow.style.display = "flex";
      titleRow.style.justifyContent = "space-between";
      titleRow.style.alignItems = "center";
      titleRow.style.marginBottom = "4px";

      const title = document.createElement("div");
      title.style.fontSize = "14px";
      title.style.fontWeight = "700";
      title.textContent = product.title;

      const note = document.createElement("div");
      note.style.fontSize = "11px";
      note.style.color = "#9ca3af";
      note.textContent = "ØªÙØ¹ÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„";

      titleRow.appendChild(title);
      titleRow.appendChild(note);
      box.appendChild(titleRow);

      const table = document.createElement("table");
      const thead = document.createElement("thead");
      thead.innerHTML =
        "<tr><th>Ø§Ù„Ù„ÙˆÙ†</th><th>Ø­Ø§Ù„Ø© Ø§Ù„Ù„ÙˆÙ†</th><th>ØªÙØ¹ÙŠÙ„</th></tr>";
      table.appendChild(thead);

      const tbody = document.createElement("tbody");

      const productStatus = status[product.id] || {};

      product.colors.forEach((c) => {
        const tr = document.createElement("tr");

        // Ø§Ù„Ø§ÙØªØ±Ø§Ø¶: Ø§Ù„Ù„ÙˆÙ† Ø´ØºØ§Ù„ Ù„Ùˆ Ù…Ø´ Ù…ØªØ®Ø²Ù† false
        const enabled =
          typeof productStatus[c.key] === "undefined"
            ? true
            : !!productStatus[c.key];

        const tdName = document.createElement("td");
        tdName.innerHTML =
          '<span class="color-dot" style="background:' +
          c.code +
          '"></span>' +
          c.label;

        const tdState = document.createElement("td");
        tdState.textContent = enabled ? "Ø´ØºØ§Ù„" : "Ù…ØªÙˆÙ‚Ù";
        tdState.style.color = enabled ? "#4ade80" : "#f97316";

        const tdToggle = document.createElement("td");
        tdToggle.style.textAlign = "center";

        const label = document.createElement("label");
        label.className = "switch";

        const input = document.createElement("input");
        input.type = "checkbox";
        input.checked = enabled;
        input.dataset.productId = product.id;
        input.dataset.colorKey = c.key;

        const slider = document.createElement("span");
        slider.className = "slider";

        label.appendChild(input);
        label.appendChild(slider);
        tdToggle.appendChild(label);

        tr.appendChild(tdName);
        tr.appendChild(tdState);
        tr.appendChild(tdToggle);
        tbody.appendChild(tr);
      });

      table.appendChild(tbody);
      box.appendChild(table);
      container.appendChild(box);
    });
  }

  function saveColors() {
    const status = loadColorStatus();

    // ØªØ£ÙƒØ¯ Ø£Ù† ÙÙŠ ÙƒØ§Ø¦Ù† Ù„ÙƒÙ„ Ù…ÙˆØ¯ÙŠÙ„
    Object.values(PRODUCTS).forEach((product) => {
      if (!status[product.id]) status[product.id] = {};
    });

    // Ø§Ù‚Ø±Ø£ Ø­Ø§Ù„Ø© ÙƒÙ„ Ø³ÙˆÙŠØªØ´
    document
      .querySelectorAll('input[type="checkbox"][data-product-id]')
      .forEach((input) => {
        const pId = input.dataset.productId;
        const colorKey = input.dataset.colorKey;
        const enabled = input.checked;
        status[pId][colorKey] = enabled; // true = Ø´ØºØ§Ù„ØŒ false = Ù…ØªÙˆÙ‚Ù
      });

    saveColorStatus(status);

    const s = document.getElementById("save-status");
    s.textContent = "ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…";
    setTimeout(() => {
      s.textContent = "";
    }, 2000);

    renderProductsColors(); // Ù†Ø¹ÙŠØ¯ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ø´Ø§Ù† Ù†Øµ "Ø´ØºØ§Ù„ / Ù…ØªÙˆÙ‚Ù" ÙŠØªØ­Ø¯Ø«
  }

  function updateVisitCounter() {
    const key = "tefa_admin_visits";
    let v = 0;
    try {
      v = parseInt(localStorage.getItem(key) || "0", 10);
    } catch (e) {
      v = 0;
    }
    v++;
    localStorage.setItem(key, String(v));
    const el = document.getElementById("visit-count");
    if (el) el.textContent = v;
  }

  updateVisitCounter();
  renderProductsColors();
</script>
</body>
</html>