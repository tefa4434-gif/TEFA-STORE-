<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>TEFA STORE | Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-200">

<header class="bg-gray-300 p-4 flex justify-between items-center">
  <a href="index.html">â† Ø±Ø¬ÙˆØ¹ Ù„Ù„Ù…ØªØ¬Ø±</a>
  <h1 class="font-bold">ğŸ›’ Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h1>
</header>

<section class="container mx-auto p-4">

  <!-- Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø³Ù„Ø© -->
  <div id="cartItems" class="space-y-3"></div>

  <div class="bg-white p-4 rounded-xl shadow mt-4">
    <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: <strong><span id="cartTotal">0</span> Ø¬Ù†ÙŠÙ‡</strong></p>
  </div>

  <button id="checkoutBtn"
    class="bg-black text-white w-full py-3 mt-4 rounded-xl">
    Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨
  </button>
</section>

<!-- Ù†Ù…ÙˆØ°Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
<section id="orderSection"
  class="hidden container mx-auto bg-white p-4 rounded-xl shadow mt-4">

  <form id="orderForm" class="space-y-3">

    <textarea id="orderDetails" readonly
      class="w-full border p-2 rounded bg-gray-100 text-sm"></textarea>

    <input id="fullName" required placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full border p-2 rounded">
    <input id="phone1" required placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" class="w-full border p-2 rounded">
    <input id="phone2" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ 2" class="w-full border p-2 rounded">
    <input id="address" required placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„" class="w-full border p-2 rounded">

    <input id="weight" placeholder="Ø§Ù„ÙˆØ²Ù† (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" class="w-full border p-2 rounded">
    <input id="height" placeholder="Ø§Ù„Ø·ÙˆÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" class="w-full border p-2 rounded">

    <select id="gov" required class="w-full border p-2 rounded">
      <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
      <option>Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©</option>
      <option>Ø§Ù„Ø¬ÙŠØ²Ø©</option>
      <option>Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©</option>
      <option>Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª</option>
    </select>

    <textarea id="notes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"
      class="w-full border p-2 rounded"></textarea>

    <div id="summary" class="bg-gray-100 p-2 rounded text-sm hidden">
      <p>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª: <span id="sumProducts"></span> Ø¬Ù†ÙŠÙ‡</p>
      <p>Ø§Ù„Ø´Ø­Ù†: <span id="sumShipping"></span> Ø¬Ù†ÙŠÙ‡</p>
      <p class="font-bold">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="sumTotal"></span> Ø¬Ù†ÙŠÙ‡</p>
    </div>

    <button class="bg-black text-white w-full py-3 rounded">
      ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨
    </button>

  </form>
</section>

<script>
let cart = JSON.parse(localStorage.getItem("cart") || "[]");

const cartItems = document.getElementById("cartItems");
const cartTotal = document.getElementById("cartTotal");

function renderCart(){
  cartItems.innerHTML = "";
  let total = 0;

  if(cart.length === 0){
    cartItems.innerHTML = "<p class='text-center text-gray-500'>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>";
    return;
  }

  cart.forEach((item, i) => {
    const sub = item.qty * item.price;
    total += sub;
    cartItems.innerHTML += `
      <div class="bg-white p-3 rounded-xl shadow">
        <p><strong>${item.name}</strong></p>
        <p>Ø§Ù„Ù„ÙˆÙ†: ${item.color}</p>
        <p>Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.qty}</p>
        <p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${sub} Ø¬Ù†ÙŠÙ‡</p>
        <button onclick="removeItem(${i})" class="text-red-600 text-sm mt-1">
          Ø­Ø°Ù
        </button>
      </div>
    `;
  });

  cartTotal.textContent = total;
}
renderCart();

function removeItem(i){
  cart.splice(i,1);
  localStorage.setItem("cart", JSON.stringify(cart));
  renderCart();
}

document.getElementById("checkoutBtn").onclick = ()=>{
  if(cart.length === 0) return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
  let text="", total=0;
  cart.forEach((item,i)=>{
    const s = item.qty * item.price;
    total += s;
    text += `${i+1}) ${item.name} - ${item.color} Ã— ${item.qty} = ${s} Ø¬Ù†ÙŠÙ‡\n`;
  });
  orderDetails.value = text;
  sumProducts.innerText = total;
  document.getElementById("orderSection").classList.remove("hidden");
};
</script>

</body>
</html>